//*********************// Starts here //**************************//

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::--==++********++==--:::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::---+###%%%%%%%%%%%%%%%%%%%%###+=--::::::::::::::::::::::::::::
:::::::::::::::::::::::::-=#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=-:::::::::::::::::::::::::
:::::::::::::::::::::--+#%%%%%%%%%####**************###%%%%%%%%%%%*---::::::::::::::::::::
::::::::::::::::::--+%%%%%%%%###***********************#####%%%%%%%%%*--::::::::::::::::::
:::::::::::::::--=#%%%%%%###******************************######%%%%%%%#=--:::::::::::::::
::::::::::::::-+#%%%%%###***********************************#######%%%%%%#+-::::::::::::::
::::::::::::-=#%%%%%##****************************************########%%%%%#+-::::::::::::
:::::::::::=*%%%%%##*******************************************#########%%%%%#=-::::::::::
:::::::::-+#%%%%##***********************************************#########%%%%%+-:::::::::
:::::::--*%%%%%#**************************************************#########%%%%%*--:::::::
:::::::-#%%%%#******************************************************#########%%%%%=-::::::
::::::=%%%%%#********************************************************#########%%%%%=::::::
::::-=%%%%%#**********************************************************#########%%%%%=-::::
::::=#%%%%#************************************************************#########%%%%#=::::
:::-*%%%%#*************************************************************##########%%%%#-:::
::-+%%%%#*********************************######************************##########%%%%+-::
::-#%%%%*****************************###%%%%%%%%%%%##********************#########%%%%#=::
:-+%%%%#***************************#%%%%%%%%%%%%%%%%%%#******************##########%%%%+-:
:-*%%%#***************************%%%%%%%+--:::-+%%%%%%%******************#########%%%%#-:
-=%%%%#*************************#%%%%%*-::::::::::-*%%%%%#****************##########%%%%=-
-+%%%%#************************##%%%#=:::::--=--::::=#%%%%#***************##########%%%%+-
-*%%%%##########################%%%%+::::=#%%%%%+::::=#%%%##########################%%%%*-
-*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#::::+%%%%%%%%+::::#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*-
-*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#::::*%%%%%%%%#::::#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#-
-*%%%#=========================*%%%#=:::-#%%%%%%#-:::-#%%%*================+++++++++#%%%*-
-+%%%#-::::::::::::::::::::::::=#%%%#-::::-+**+-::::-*%%%#=:::::::::::::::----------#%%%*-
-=%%%%=:::::::::::::::::::::::::+#%%%#=::::::::::::=#%%%%+::::::::::::::::---------=%%%%+-
:-#%%%*::::::::::::::::::::::::::=#%%%%#+-::::::-=#%%%%%=:::::::::::::::::---------*%%%#=:
:-+%%%%-:::::::::::::::::::::::::::*%%%%%%%%%%%%%%%%%%*::::::::::::::::::---------=%%%%*-:
:-=#%%%*::::::::::::::::::::::::::::-+#%%%%%%%%%%%%#+-:::::::::::::::::::---------*%%%#=-:
::-*%%%%=:::::::::::::::::::::::::::::::-++****++=::::::::::::::::::::::---------+#%%%*-::
:::=#%%%#-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::--------=#%%%#=:::
:::-=#%%%*-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::--------=*%%%#+-:::
::::-+%%%%*-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::--------=*%%%%+-::::
:::::-+%%%%*-::::::::::::::::::::::::::::::::::::::::::::::::::::::::--------=*%%%%*-:::::
:::::::=%%%%#-::::::::::::::::::::::::::::::::::::::::::::::::::::::--------=#%%%%+:::::::
:::::::-=#%%%%+::::::::::::::::::::::::::::::::::::::::::::::::::::-------=+%%%%%=-:::::::
::::::::--*%%%%#=:::::::::::::::::::::::::::::::::::::::::::::::::------==#%%%%#=-::::::::
::::::::::-+#%%%%*-:::::::::::::::::::::::::::::::::::::::::::::------==*%%%%%+-::::::::::
:::::::::::--*%%%%%*=:::::::::::::::::::::::::::::::::::::::::-------=*%%%%%*--:::::::::::
:::::::::::::-=*%%%%%#+-::::::::::::::::::::::::::::::::::::------=+#%%%%%*=-:::::::::::::
::::::::::::::--=*%%%%%%*+-:::::::::::::::::::::::::::::::-----=+#%%%%%%*=--::::::::::::::
:::::::::::::::::--+%%%%%%%#*=::::::::::::::::::::::::::---==*#%%%%%%%+--:::::::::::::::::
:::::::::::::::::::---+%%%%%%%%%#+-::::::::::::::::::--=*#%%%%%%%%%*---:::::::::::::::::::
:::::::::::::::::::::::--+#%%%%%%%%%%%%###******###%%%%%%%%%%%%#+--:::::::::::::::::::::::
:::::::::::::::::::::::::::--=*##%%%%%%%%%%%%%%%%%%%%%%%%##*+--:::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::---=+**############**+==--::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::


//**********************|| Librarys & Links ||***********************//
#include <NTPClient.h>
#include <WiFi.h>
#include <WiFiUdp.h>
#include <TFT_eSPI.h>
#include "background.h"
//**********************|| Librarys & Links ||***********************//


//**********************|| Definations ||***********************//
TFT_eSPI tft = TFT_eSPI(); 
const char* ssid       = "Your WiFi ssid(Name)"; //Enter your WiFi name here. 
const char* password   = "Your WiFi password";   //Enter your WiFi name here.
WiFiUDP ntpUDP;
int timezone  = 19800; //Enter timezone of your country here.
NTPClient timeClient(ntpUDP,"pool.ntp.org",timezone , 37440);
int lastMinute = -1;  //To update the time after every 1 minute. 
//**********************|| Definations ||***********************//

//***********************|| setup part ||**************************//
void setup() {
  tft.init(); //Initialize display.
  tft.setRotation(1); //Rotate Display.
  tft.setSwapBytes(true); 
   timeClient.begin();  //ntp server begin.
  Serial.begin(115200); //Initialize serial.
  WiFi.begin(ssid, password); //Nothing to do here. 
  while ( WiFi.status() != WL_CONNECTED ) { //Nothing to do here.
    delay ( 500 ); //Nothing to do here.
    Serial.print ( "." ); //Nothing to do here.
  }
}
//***********************|| Setup part ||**************************//

//***********************|| Graphics part ||***********************//

void loop() {
 int currentMinute = timeClient.getMinutes();
 Serial.println("hours:");  //Serial output.
 Serial.println(timeClient.getHours());  //Serial output.
 Serial.println("min:");  //Serial output.
 Serial.println(timeClient.getMinutes());  //Serial output. 
 timeClient.update();  //ntp server update (to update time).

if (currentMinute != lastMinute) {  //To update the time after every 1 minute.
  lastMinute = currentMinute;  //To update the time after every 1 minute.
 tft.fillScreen(TFT_WHITE);  //Graphics
 tft.pushImage(0, 0, 320, 240, background);  //Graphics
 tft.setTextColor(TFT_BLACK);  //Graphics
 tft.setTextSize(2);  //Graphics
 tft.setFreeFont(FF23);  //Graphics
 tft.setCursor(5, 150);  //Graphics
 tft.print(timeClient.getHours());  //Graphics
 tft.setCursor(230, 150);  //Graphics
 tft.print(timeClient.getMinutes());  //Graphics
 tft.setTextSize(1);  //Graphics
 tft.drawString("H", 35, 172);  //Graphics
 tft.drawString("M", 260, 172);  //Graphics
 } 
}
//***********************|| Graphics part ||***********************//


//*********************// Ends here //**************************//
